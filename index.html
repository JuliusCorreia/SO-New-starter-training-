<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Aviation Security – Learning Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #0b0c10;
      --bg-soft: #050816;
      --card: #020617;
      --accent: #0ea5e9;
      --accent-soft: rgba(14, 165, 233, 0.15);
      --border-subtle: rgba(148, 163, 184, 0.25);
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --radius-lg: 18px;
      --radius-md: 12px;
      --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.8);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #1e293b 0, #020617 55%);
      color: var(--text-main);
      min-height: 100vh;
    }

    .shell {
      max-width: 1120px;
      margin: 0 auto;
      padding: 16px;
      display: grid;
      grid-template-columns: 260px minmax(0, 1fr);
      gap: 16px;
    }

    header {
      grid-column: 1 / -1;
      padding: 8px 4px 4px;
    }

    header h1 {
      font-size: 26px;
      font-weight: 650;
      letter-spacing: -0.03em;
    }

    header p {
      margin-top: 4px;
      font-size: 13px;
      color: var(--text-muted);
    }

    /* Sidebar */
    .sidebar {
      background: rgba(15, 23, 42, 0.92);
      border-radius: var(--radius-lg);
      padding: 12px;
      border: 1px solid var(--border-subtle);
      backdrop-filter: blur(18px);
      box-shadow: var(--shadow-soft);
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .sidebar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 11px;
      color: var(--text-muted);
    }

    .sidebar-header span {
      text-transform: uppercase;
      letter-spacing: 0.16em;
    }

    .sidebar-links a {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      color: var(--text-muted);
      text-decoration: none;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.3);
      transition: background 0.15s, color 0.15s, border-color 0.15s;
    }

    .sidebar-links a:hover {
      background: rgba(15, 23, 42, 0.95);
      color: #e5e7eb;
      border-color: var(--accent);
    }

    .topic-list {
      list-style: none;
      padding: 0;
      margin: 4px 0 0;
      border-radius: var(--radius-md);
      background: rgba(15, 23, 42, 0.85);
      border: 1px solid rgba(148, 163, 184, 0.25);
      max-height: 540px;
      overflow-y: auto;
    }

    .topic-item {
      padding: 7px 10px;
      font-size: 13px;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      transition: background 0.15s, color 0.15s, transform 0.1s;
    }

    .topic-item span.label {
      flex: 1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .topic-item small {
      font-size: 10px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      margin-left: 8px;
    }

    .topic-item:hover {
      background: rgba(30, 64, 175, 0.45);
      color: #e5e7eb;
    }

    .topic-item.active {
      background: linear-gradient(90deg, var(--accent), #0284c7);
      color: #f9fafb;
      transform: translateX(1px);
    }

    /* Main content */
    .main {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .card {
      background: radial-gradient(circle at top left, #0b1120 0, #020617 62%);
      border-radius: var(--radius-lg);
      padding: 18px 18px 20px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      box-shadow: var(--shadow-soft);
      min-height: 260px;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 12px;
    }

    .card-title {
      font-size: 18px;
      font-weight: 600;
      letter-spacing: -0.02em;
    }

    .card-subtitle {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 2px;
    }

    .pill {
      padding: 3px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      font-size: 11px;
      color: var(--text-muted);
    }

    .content-body {
      font-size: 14px;
      color: #e5e7eb;
      line-height: 1.7;
      white-space: pre-wrap;
    }

    .content-body h3 {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .content-body p {
      margin-bottom: 8px;
    }

    .content-body ul {
      margin-left: 14px;
      margin-bottom: 8px;
    }

    .content-body li {
      margin-bottom: 3px;
    }

    .smart-note {
      margin-top: 12px;
      padding: 10px 12px;
      border-radius: var(--radius-md);
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.35);
      font-size: 13px;
      color: var(--text-muted);
    }

    .smart-note strong {
      color: var(--accent);
    }

    @media (max-width: 860px) {
      .shell {
        grid-template-columns: 1fr;
      }
      .sidebar {
        order: 2;
      }
      .main {
        order: 1;
      }
    }
  </style>
</head>
<body>
  <div class="shell">
    <header>
      <h1>Aviation Security – Learning Hub</h1>
      <p>Apple‑style single page for topics and content. Flashcards and mock tests open in dedicated views.</p>
    </header>

    <!-- Sidebar: topics + links to flashcards / mock tests -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <span>Topics</span>
        <div class="sidebar-links">
          <!-- These will open separate pages you’ll create later -->
          <a href="flashcards.html" target="_blank">Flashcards</a>
          <a href="mocktest.html" target="_blank">Mock Tests</a>
        </div>
      </div>

      <ul id="topicList" class="topic-list"></ul>
    </aside>

    <!-- Main content card -->
    <main class="main">
      <section class="card">
        <div class="card-header">
          <div>
            <div id="contentTitle" class="card-title">Select a topic</div>
            <div id="contentSubtitle" class="card-subtitle">
              Click a topic on the left to see its full content, exactly as in your notes.
            </div>
          </div>
          <div id="contentTag" class="pill">—</div>
        </div>
        <div id="contentBody" class="content-body">
          <p>This page is a clean reader for your Aviation Security topics.</p>
          <div class="smart-note">
            <strong>Tip:</strong> Use this page for reading/revision, then open Flashcards and Mock Tests using the buttons in the sidebar.
          </div>
        </div>
      </section>
      <main class="main">
  <section class="card">
    <div class="card-header">
      <div>
        <div id="contentTitle" class="card-title">Select a topic</div>
        <div id="contentSubtitle" class="card-subtitle">
          Click a topic on the left to see its full content, exactly as in your notes.
        </div>
      </div>
      <div id="contentTag" class="pill">—</div>
    </div>
    <div id="contentBody" class="content-body">
      <p>This page is a clean reader for your Aviation Security topics.</p>
      <div class="smart-note">
        <strong>Tip:</strong> Use this page for reading/revision, then open Flashcards and Mock Tests using the buttons in the sidebar.
      </div>
    </div>
  </section>

  <!-- Embedded flashcards panel -->
  <section class="card">
    <div class="card-header">
      <div>
        <div class="card-title">Flashcards</div>
        <div class="card-subtitle">Quick Q&A view (embedded from flashcards.html).</div>
      </div>
    </div>
    <iframe
      src="flashcards.html"
      style="width:100%;height:420px;border:none;border-radius:18px;overflow:hidden;background:transparent;"
    ></iframe>
  </section>
</main>

    </main>
  </div>

  <!-- Shared data (topics + content) -->
  <script src="data.js"></script>

  <script>
    // Expecting `topics` and `contentItems` from data.js

    const topicListEl = document.getElementById("topicList");
    const contentTitleEl = document.getElementById("contentTitle");
    const contentSubtitleEl = document.getElementById("contentSubtitle");
    const contentTagEl = document.getElementById("contentTag");
    const contentBodyEl = document.getElementById("contentBody");

    let currentTopicId = null;

    function shortTagFromName(name) {
      // Simple, neat tag from first word or acronym
      if (!name) return "Topic";
      if (name.includes("DfT")) return "DfT";
      if (name.includes("CAA")) return "CAA";
      if (name.includes("Heathrow")) return "Heathrow";
      if (name.includes("Threat levels")) return "Threat";
      return name.split(" ")[0];
    }

    function renderTopicList() {
      topicListEl.innerHTML = "";
      topics.forEach((t) => {
        const li = document.createElement("li");
        li.className = "topic-item" + (t.id === currentTopicId ? " active" : "");
        const label = document.createElement("span");
        label.className = "label";
        label.textContent = t.name;
        const tag = document.createElement("small");
        tag.textContent = shortTagFromName(t.name);
        li.appendChild(label);
        li.appendChild(tag);
        li.addEventListener("click", () => {
          currentTopicId = t.id;
          renderTopicList();
          showTopic(t.id);
        });
        topicListEl.appendChild(li);
      });
    }

    function showTopic(topicId) {
      const topic = topics.find((t) => t.id === topicId);
      const items = contentItems.filter((c) => c.topicId === topicId);
      contentTitleEl.textContent = topic ? topic.name : "Topic";
      contentSubtitleEl.textContent = items.length > 1
        ? "This topic has multiple content items."
        : "This topic shows the content exactly as in your notes.";
      contentTagEl.textContent = shortTagFromName(topic?.name || "");

      if (!items.length) {
        contentBodyEl.textContent = "No content found for this topic yet.";
        return;
      }

      // Concatenate all bodies for that topic
      const combined = items.map((i) => i.body).join("\n\n");
      contentBodyEl.textContent = combined;
    }

    function init() {
      renderTopicList();
    }

    init();
  </script>
</body>
</html>
